<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yes or No</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="emoji-bg" id="emojiBg"></div>

<div class="container">
  <h2>Maanja Mishri?</h2>

  <div class="buttons">
    <button id="yesBtn">Yes ğŸ’œ</button>
    <button id="noBtn">No ğŸ˜…</button>
  </div>
</div>

<script>
let alreadyClicked = false;

const pop = new Audio("yes-sound.mp3");
pop.preload = "auto";

const emojis = ["ğŸ’œ","âœ¨","ğŸŒ¸","ğŸ˜„","ğŸ’«","ğŸ’•","ğŸŒˆ","ğŸ¦‹","â­","ğŸ˜","ğŸŒ¼"];
const emojiBg = document.getElementById("emojiBg");

for (let i = 0; i < 250; i++) {
  const span = document.createElement("span");
  span.textContent = emojis[Math.floor(Math.random() * emojis.length)];
  emojiBg.appendChild(span);
}

// Add message area
const msg = document.createElement("div");
msg.id = "msg";
msg.innerText = "Go onâ€¦ try No ğŸ˜Œ";
document.querySelector(".container").appendChild(msg);

// Messages under Yes
const messages = [
  "Almost ğŸ˜„",
  "Nice try!",
  "Still trying? ğŸ˜",
  "No is getting tired ğŸ˜‚",
  "Just press Yes ğŸ’œ"
];

let escapeCount = 0;
let yesScale = 1;

// NO button behavior
function moveNo(e) {
  escapeCount++;

  // ğŸ”¤ Change text below Yes
  const msg = document.getElementById("msg");
  if (msg) {
    msg.innerText = messages[Math.floor(Math.random() * messages.length)];
  }

  // ğŸ“³ VIBRATION â€” works only on touch
  if (e && e.type === "touchstart" && navigator.vibrate) {
    navigator.vibrate([60, 40, 60]);
  }

  // âœ¨ NO trail
  const trailEmojis = ["ğŸ’¨", "âœ¨", "ğŸ¦‹"];
  const trail = document.createElement("div");
  trail.className = "trail";
  trail.innerText =
    trailEmojis[Math.floor(Math.random() * trailEmojis.length)];
  trail.style.left = noBtn.getBoundingClientRect().left + "px";
  trail.style.top = noBtn.getBoundingClientRect().top + "px";
  document.body.appendChild(trail);
  setTimeout(() => trail.remove(), 1000);

  // ğŸ˜ˆ Fake click text
  if (e) {
    const fake = document.createElement("div");
    fake.className = "fake-text";
    fake.innerText = "Almost!";
    fake.style.left =
      (e.touches ? e.touches[0].clientX : e.clientX) + "px";
    fake.style.top =
      (e.touches ? e.touches[0].clientY : e.clientY) + "px";
    document.body.appendChild(fake);
    setTimeout(() => fake.remove(), 800);
  }

  // ğŸƒ Move NO instantly
  const w = window.innerWidth;
  const h = window.innerHeight;

  noBtn.style.position = "fixed";
  noBtn.style.left = Math.random() * (w - 120) + "px";
  noBtn.style.top = Math.random() * (h - 60) + "px";

  // â¬† YES grows
  yesScale += 0.12;
  yesBtn.style.transform = `scale(${yesScale})`;
}

// EVENTS (IMPORTANT)
noBtn.addEventListener("mouseover", moveNo);

// ğŸ“³ Touch event must call moveNo WITH event
noBtn.addEventListener("touchstart", (e) => {
  moveNo(e);
});

// YES follows cursor slightly (desktop only)
document.addEventListener("mousemove", e => {
  yesBtn.style.marginLeft =
    (e.clientX - window.innerWidth / 2) * 0.01 + "px";
});

// ğŸ’œ Floating hearts on YES hover
yesBtn.addEventListener("click", async () => {
  if (alreadyClicked) return; // ğŸ”’ prevent double fire
  alreadyClicked = true;

  // Disable button visually
  yesBtn.style.pointerEvents = "none";

  // Start sound
  pop.currentTime = 0;
  try {
    await pop.play();
  } catch (e) {
    // sound blocked â€” ignore
  }

  // ğŸ‰ Confetti
  for (let i = 0; i < 30; i++) {
    const c = document.createElement("div");
    c.innerText = "ğŸ‰";
    c.style.position = "fixed";
    c.style.left = Math.random() * window.innerWidth + "px";
    c.style.top = Math.random() * window.innerHeight + "px";
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 1500);
  }

  // â³ Calculate REAL wait time
  const soundDuration = isNaN(pop.duration) ? 2.5 : pop.duration;

  // âœ… Wait for sound to ACTUALLY finish (with buffer)
  setTimeout(() => {
    window.location.href = "success.html";
  }, (soundDuration * 1000) + 300);
});



</script>




</body>

</html>
